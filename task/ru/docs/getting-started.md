# Как начать (даже если страшно)

Цель этого файла — помочь запустить проект и дойти до первых проходящих проверок маленькими шагами.

## 0) Прочитайте 4 вещи (в таком порядке)

1. `../openapi.yml` — какие эндпоинты и форматы ожидаются.
2. `./assignment.md` — баллы и правила согласованного состояния (что чаще всего ломает автопроверку).
3. `./dsl.md` — как устроен мини-язык правил и какие есть уровни поддержки.
4. `./faq.md` — короткие ответы на частые вопросы (чтобы не тратить время на «Почему так?»).

## 1) Минимальный скелет, который уже полезен

Соберите сервис так, чтобы:

- контейнер стартовал;
- `GET /api/v1/ping` возвращал `{"status":"ok"}`.

Это снимает страх «ничего не работает» и дает точку опоры.

## 2) Делайте по одному эндпоинту за раз (и сразу проверяйте).

Рекомендуемый порядок:

1. Регистрация/логин (JWT).
2. Пользователь: `GET /users/me`.
3. Пользователь: `PUT /users/me` (полное обновление + разница между «ключ отсутствует» и `null`).
4. Правила: создание/обновление/список/деактивация (без сложной логики).
5. Проверка выражений DSL: `/fraud-rules/validate` (уровень поддержки 1).
6. Transactions: `POST /transactions` + `GET /transactions/{id}` (без правил и с правилами).
7. Batch: `POST /transactions/batch` (изоляция элементов).

На каждом шаге полезно прогонять минимальные локальные тесты.

## 3) Как честно набрать баллы с частичной реализацией DSL

Вы можете реализовывать DSL по уровням поддержки:

- Сначала сделайте уровень 1 (сравнение `amount` с числом).
- Потом добавляйте следующие уровни, только когда базовая функциональность стабильна.

Важно! Если вы еще не умеете вычислять выражение:

- Сервис не должен падать.
- Правило должно считаться `matched=false`.
- `ruleResults[].description` должно быть не пустым.

## 4) Рецепт для участников: «минимум + качество»

Если времени мало, лучше сделать меньше функциональности, но правильно:

- Хранение в БД (чтобы после перезапуска все сохранялось).
- Воспроизводимость результатов (в тех же условиях).
- Правило «Все активные правила дают ruleResults».
- Корректная обработка ошибок и кодов.

## 5) Как не провалить автопроверку (самые частые ловушки)

- Не останавливайтесь на первом совпадении правила: `ruleResults` должен быть полным.
- Не делайте рандом: один и тот же запрос при одинаковом состоянии базы обязан давать тот же результат.
- Не путайте HTTP-код и бизнес-результат: `POST /transactions` возвращает `201` и для `DECLINED`.
- В `PUT /users/*` отличайте «ключ отсутствует» и `null` (см. `./assignment.md`).

